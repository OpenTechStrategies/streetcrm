{% load static i18n %}
		<link href="{% static "js/jquery.js" %}" type="script" />

{% if change %}
  {# javascript can extract what ID to talk to from here #}
  <input type="hidden" id="event_object_id" value="{{ object_id }}" />
  <div class="_inline-group" id="participant-group">
    <div class="tabular inline-related {% if forloop.last %}last-related{% endif %}">
      <fieldset class="module">
        <h2>Attendees</h2>
        <table class="table table-striped table-bordered" id="participant-table">
          <thead>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
                <th>Institution</th>
              <th>Attendee's Phone Number</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% comment %}
            <!-- This version will be commented out too, after being thoroughly tested -->
            <tr class="form-row participant-static" id="participant-static-1">
              <input type="hidden" class="participant-id" value="1" />
              <td><p>Georgia</p></td>
              <td><p>O'Keeffe</p></td>
              <td><p>+15557132859</p></td>
              <td><p>1234 Lily Rd, Sun Prairie, WI</p></td>
              <td>
                <button type="submit" class="btn btn-info participant-edit" name="_edit">✎ {% trans 'Edit' %}</button>
                <button type="submit" class="btn btn-danger participant-unlink" name="_unlink">✘ {% trans 'Unlink' %}</button>
              </td>
            </tr>

            <!-- This one specifically covers the next row's issues -->
            <tr class="errors-below participant-errors" id="participant-errors-1"
                style="display: none"
                >
              <input type="hidden" class="participant-id" value="1" />
              <td colspan="5">
                <p><i>Errors were found in the entry below...</i></p>
                <!-- Loop over and make a list of these... -->
                <div class="alert alert-danger">
                  Not a valid phone number.
                </div>
                <div class="alert alert-danger">
                  Last name must not be blank.
                </div>
              </td>
            </tr>

            <tr class="form-row participant-edit" id="participant-edit-1"
                style="display: none"
                >
              <input type="hidden" class="participant-id" value="1" />
              <td><input class="vTextField" type="text" value="Georgia" /></td>
              <td><input class="vTextField" type="text" value="O'Keeffe" /></td>
              <td><input class="vTextField" type="text" value="+15557132859" /></td>
              <td><input class="vTextField" type="text" value="1234 Lily Rd, Sun Prairie, WI" /></td>
              <td>
                <button type="submit" class="btn btn-success participant-save" name="_save">✓ {% trans 'Save' %}</button>
                <button type="submit" class="btn btn-warning participant-cancel" name="_cancel">✗ {% trans 'Cancel' %}</button>
              </td>
            </tr>
            {% endcomment %}

            {% comment %}
            <!-- This is commented out, for our own reference -->
            <!-- Populated via javascript ;D -->
            <tr class="form-row">
              <td><p>Georgia</p></td>
              <td><p>O'Keeffe</p></td>
              <td><p>+15557132859</p></td>
              <td><p>1234 Lily Rd, Sun Prairie, WI</p></td>
              <td>
                <button type="submit" class="btn btn-info" name="_edit">✎ {% trans 'Edit' %}</button>
                <button type="submit" class="btn btn-danger" name="_unlink">✘ {% trans 'Unlink' %}</button>
              </td>
            </tr>

            <tr class="form-row">
              <td><input class="vTextField" type="text" value="Georgia" /></td>
              <td><input class="vTextField" type="text" value="O'Keeffe" /></td>
              <td><input class="vTextField" type="text" value="+15557132859" /></td>
              <td><input class="vTextField" type="text" value="1234 Lily Rd, Sun Prairie, WI" /></td>
              <td>
                <button type="submit" class="btn btn-success" name="_save">✓ {% trans 'Save' %}</button>
                <button type="submit" class="btn btn-warning" name="_cancel">✗ {% trans 'Cancel' %}</button>
              </td>
            </tr>

            <!-- This one specifically covers the next row's issues -->
            <tr class="errors-below">
              <td colspan="5">
                <p><i>Errors were found in the entry below...</i></p>
                <!-- Loop over and make a list of these... -->
                <div class="alert alert-danger">
                  Not a valid phone number.
                </div>
                <div class="alert alert-danger">
                  Last name must not be blank.
                </div>
              </td>
            </tr>

            <tr class="form-row">
              <td><input class="vTextField" type="text" value="Lavinia" /></td>
              <td><input class="vTextField" type="text" value="" /></td>
              <td><input class="vTextField" type="text" value="1234abcdefg" /></td>
              <td><input class="vTextField" type="text" value="5432 Grand Sicily Ave, Bologna, Italy" /></td>
              <td>
                <button type="submit" class="btn" name="_save">✓ {% trans 'Save' %}</button>
                <button type="submit" class="btn" name="_cancel">✗ {% trans 'Cancel' %}</button>
              </td>
            </tr>

            <tr class="form-row">
              <td>
                <p><i>Select an existing participant:</i></p>
                <select>
                  <option>
                    ----------
                  </option>
                  <option>
                    Artemesia Gentileschi
                  </option>
                  <option>
                    Mary Cassatt
                  </option>
                  <option>
                    Louise Moillon
                  </option>
                </select>
              </td>
              <td colspan="4">
                <button type="submit" class="btn" name="_select">✓ {% trans 'Select' %}</button>
                <button type="submit" class="btn" name="_cancel">✗ {% trans 'Cancel' %}</button>
              </td>
            </tr>
            {% endcomment %}
          </tbody>
        </table>
        <div class="pull-left" style="padding: 10px">
          <button type="submit" class="btn" name="_cancel"
                  id="link-existing-participant-btn">✚ {% trans 'Link existing' %}</button>
          <select id="available-participants-select"
                  style="display: none">
          </select>
          <button type="submit" class="btn btn-info" name="_select"
                  style="display: none"
                  id="select-existing-participant-btn">✓ {% trans 'Select' %}</button>
          <button type="submit" class="btn btn-warning" name="_cancel"
                  style="display: none"
                  id="cancel-link-existing-btn">✗ {% trans 'Cancel' %}</button>
        </div>
        <div style="padding: 10px">
          <button type="submit" class="btn" name="_select"
                  id="add-new-participant-btn">✚ {% trans 'Add new' %}</button>
        </div>
      </fieldset>
    </div>
  </div>

  <script type="text/javascript" src="{% static "js/jquery.js" %}"></script>
  <script type="text/javascript" src="{% static "js/jquery-ui-1.11.4.custom/jquery-ui.js" %}"></script>
  <script type="text/css" src="{% static "js/jquery-ui-1.11.4.custom/jquery-ui.css" %}"></script>
  <script type="text/javascript" src="{% static "js/inline_ajax.js" %}"></script>
{% else %}
  <p>
    <i>(To add participants, first save this event.)</i>
  </p>

{% endif %}

